<!DOCTYPE html> <!-- HTML5 -->
<html>
<meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="../css/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lobster">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<head>
	<title>Dælenenga bryggekalkulator</title>
	<link rel="apple-touch-icon" sizes="57x57" href="./favicons/apple-touch-icon-57x57.png">
	<link rel="apple-touch-icon" sizes="60x60" href="./favicons/apple-touch-icon-60x60.png">
	<link rel="apple-touch-icon" sizes="72x72" href="./favicons/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="76x76" href="./favicons/apple-touch-icon-76x76.png">
	<link rel="apple-touch-icon" sizes="114x114" href="./favicons/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="./favicons/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="./favicons/apple-touch-icon-144x144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="./favicons/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="./favicons/apple-touch-icon-180x180.png">
	<link rel="icon" type="image/png" href="./favicons/favicon-32x32.png" sizes="32x32">
	<link rel="icon" type="image/png" href="./favicons/favicon-194x194.png" sizes="194x194">
	<link rel="icon" type="image/png" href="./favicons/favicon-96x96.png" sizes="96x96">
	<link rel="icon" type="image/png" href="./favicons/android-chrome-192x192.png" sizes="192x192">
	<link rel="icon" type="image/png" href="./favicons/favicon-16x16.png" sizes="16x16">
	<link rel="manifest" href="./favicons/manifest.json">
	<link rel="mask-icon" href="./favicons/safari-pinned-tab.svg" color="#5bbad5">
	<meta name="msapplication-TileColor" content="#da532c">
	<meta name="msapplication-TileImage" content="./favicons/mstile-144x144.png">
	<meta name="theme-color" content="#ffffff">
	
	<style>
		.material-icons{vertical-align:-26%}
		.iconcolor {color:#fff !important; background-color:#00467f !important}
		.w3-lobster {
		  font-family: "Lobster", serif;
		  font-weight: bold;
		}
		/*Slider formatting*/
		input[type=range] {
			width: 90%; /* Specific width is required for Firefox. */
		}
		input[type=number] {
			width: 85%; /* Specific width is required for Firefox. */
			border: 2px solid teal;
    		border-radius: 4px;
		}
	</style>
	
	<script> 
	function x() {
		document.getElementById('g').value = ((1000 +
			(
				375*parseFloat(document.getElementById('dme').value) +
				270*parseFloat(document.getElementById('lme').value)
			) /
			parseFloat(document.getElementById('vol').value)
			+
			parseFloat(document.getElementById('eff').value) * 
			(
				296*parseFloat(document.getElementById('basis').value) + 
				270*parseFloat(document.getElementById('spes').value)
			) /
			(
				100*parseFloat(document.getElementById('vol').value)
			)
		)/1000).toFixed(3);
	};
	
	function f() {
		//var m = $('#m').val();		
		document.getElementById('m').value = (
			parseFloat(document.getElementById('basis').value) +
			parseFloat(document.getElementById('spes').value) +
			parseFloat(document.getElementById('lme').value) +
			parseFloat(document.getElementById('dme').value) 
		).toFixed(2);
	};
	
	function p() {
		document.getElementById('pbasis').value = ((100*parseFloat(document.getElementById('basis').value)) / document.getElementById('m').value).toFixed(0);
		document.getElementById('pspes').value = ((100*parseFloat(document.getElementById('spes').value)) / document.getElementById('m').value).toFixed(0);
		document.getElementById('plme').value = ((100*parseFloat(document.getElementById('lme').value)) / document.getElementById('m').value).toFixed(0);
		document.getElementById('pdme').value = ((100*parseFloat(document.getElementById('dme').value)) / document.getElementById('m').value).toFixed(0);
	};

	function imp() {
		document.getElementById('lbbasis').value = (parseFloat(document.getElementById('basis').value) * 2.2046).toFixed(1);
		document.getElementById('lbspes').value = (parseFloat(document.getElementById('spes').value) * 2.2046).toFixed(1);
		document.getElementById('lblme').value = (parseFloat(document.getElementById('lme').value) * 2.2046).toFixed(1);
		document.getElementById('lbdme').value = (parseFloat(document.getElementById('dme').value) * 2.2046).toFixed(1);
		document.getElementById('lbtot').value = (parseFloat(document.getElementById('m').value) * 2.2046).toFixed(1);
		document.getElementById('galvol').value = (parseFloat(document.getElementById('vol').value) / 3.7854).toFixed(1);
	};
	
	function fabv() {
		var fg = document.getElementById("fginput").value;
		var og = document.getElementById('oginput').value;
		var carbo = parseFloat(document.getElementById('carboinput').value);
		/* Simple formula: */
		/* document.getElementById('abv').value = ((og-fg)*131.25).toFixed(1); */
		/* Advanced formula, more accurate for higher abv: */
		document.getElementById('abv').value = ((76.08 * (og-fg) / (1.775-og)) * (fg / 0.794)).toFixed(2);
		var abvx = parseFloat(document.getElementById('abv').value);
		document.getElementById('abvcarbo').value = (carbo/17.0).toFixed(2);
		document.getElementById('abvtot').value = (abvx + (carbo / 17.0)).toFixed(2);
	};	

	function setInput() {
		document.getElementById('oginput').value = document.getElementById('g').value
	};

	function ibu() {
		var og = document.getElementById('g').value;
		var v = document.getElementById('vol').value;
		var masses = [document.getElementById('mass1').value, document.getElementById('mass2').value, document.getElementById('mass3').value, document.getElementById('mass4').value, document.getElementById('mass5').value];
		var alfas = [document.getElementById('alfa1').value/100, document.getElementById('alfa2').value/100, document.getElementById('alfa3').value/100, document.getElementById('alfa4').value/100, document.getElementById('alfa5').value/100];
		var times = [document.getElementById('time1').value, document.getElementById('time2').value, document.getElementById('time3').value, document.getElementById('time4').value, document.getElementById('time5').value];
		var ibu1, ibu2, ibu3, ibu4, ibu5;
		var ibus = [ibu1, ibu2, ibu3, ibu4, ibu5];

		for (i=0; i<5; i++) {
			ibus[i] = (alfas[i]*masses[i]*1000/v) 
					* (1.65*Math.pow(0.000125,(og-1))) 
					* (1-Math.exp(-0.04*times[i]))/4.15;
		}

		document.getElementById('ibu1').value = (ibus[0]).toFixed(1);
		document.getElementById('ibu2').value = (ibus[1]).toFixed(1);
		document.getElementById('ibu3').value = (ibus[2]).toFixed(1);
		document.getElementById('ibu4').value = (ibus[3]).toFixed(1);
		document.getElementById('ibu5').value = (ibus[4]).toFixed(1);
	
		document.getElementById('ibutot').value = (ibus[0]+ibus[1]+ibus[2]+ibus[3]+ibus[4]).toFixed(0);
	};

	function temp() {
		var cx = document.getElementById("myRangeT").value;
		document.getElementById("ctemp").innerHTML = (cx*1 + 0).toFixed(1);
		var fx = (cx*1.8 + 32.0).toFixed(1);
		document.getElementById("ftemp").innerHTML = fx;
	};

	function gOz() {
		var ozx = document.getElementById("myRangeW").value;
		document.getElementById("oz").innerHTML = (ozx*1 + 0).toFixed(2);
		var gx = (ozx*28.349).toFixed(1);
		document.getElementById("gram").innerHTML = gx;
	};
	</script>
</head>

<body onload="f(),x(),p(),imp(),fabv(),ibu(),temp(),gOz()" class="w3-light-grey">



<!-- <img src="gravity/images/icon.png" align="left"> -->
<div class="w3-container w3-bottombar w3-lobster w3-teal w3-xxlarge">
	<img src="./dn-logo-white.svg" width="70" height="70" align="center" style="margin: 2px 0px" />
	Dælenenga bryggekalkulator
</div>

<form oninput="f(),x(),p(),imp(),fabv()">
<table cellpadding="1" class="w3-table">
	<thead>
		<tr class="w3-teal">
			<th>Beregn OG</th>
			<th>US-mål</th>
			<th>Andel</th>
		</tr>
	</thead>		
	<tr><td><span class="w3-badge w3-teal">kg</span> <label class="w3-label w3-text-teal"><b>Basismalt</b></label><input class="w3-input w3-round" type="number" id="basis" value="5" step="0.5"></td><td>&nbsp;<output id="lbbasis"></output>lb&nbsp;</td><td><output id="pbasis"></output>%</td></tr>
	
	<tr><td><span class="w3-badge w3-teal">kg</span> <label class="w3-label w3-text-teal"><b>Spesialmalt</b></label><input class="w3-input w3-round" type="number" id="spes" value="0.0" step="0.1"></td><td>&nbsp;<output id="lbspes"></output>lb&nbsp;</td><td><output id="pspes"></output>%</td></tr>
	
	<tr><td><span class="w3-badge w3-teal">kg</span> <label class="w3-label w3-text-teal"><b>Sirup/LME</b></label><input class="w3-input w3-round" type="number" id="lme" value="0.0" step="0.5"><td>&nbsp;<output id="lblme"></output>lb&nbsp;</td><td><output id="plme"></output>%</td></tr>
	
	<tr><td><span class="w3-badge w3-teal">kg</span> <label class="w3-label w3-text-teal"><b>Sukker/DME</b></label><input class="w3-input w3-round" type="number" id="dme" value="0.0" step="0.5"></td><td>&nbsp;<output id="lbdme"></output>lb&nbsp;</td><td>
	<output id="pdme"></output>%</td></tr>
	
	<tr><td><span class="w3-badge w3-teal">L</span> <label class="w3-label w3-text-teal"><b>Volum</b></label><input class="w3-input w3-round" type="number" id="vol" value="23"></td><td><output id="galvol"></output>gal&nbsp;</td><td></td></tr>
	
	<tr><td><span class="w3-badge w3-teal">%</span> <label class="w3-label w3-text-teal"><b>Utbytte</b></label><input class="w3-input w3-round" type="number" id="eff" value="75"></td><td></td><td></tr>
	
	<tr><td>Totalt: <output id="m"></output>kg</td><td><output id="lbtot"></output>lb&nbsp;</td></td><td></tr>
	
	<tr class="w3-orange w3-xlarge"><td><b>OG: <output id="g"></output></b></td></td><td><td></td></tr>
</table>

<p><br/><br/></p>


<!-- <div class="w3-container w3-teal w3-large"><b>ABV</b></div> -->
<table cellpadding="1" class="w3-table">
	<thead>
		<tr class="w3-teal">
			<th>Beregn ABV</th>
			<th>Netto ABV</th>
		</tr>
	</thead>
	<tr>
		<td><span class="w3-badge w3-teal">&nbsp;&nbsp;&nbsp;</span> <label class="w3-label w3-text-teal"><b>OG målt</b></label>
		<input class="w3-input w3-round" type="number" id="oginput" value="1.050" step="0.001">
		</td><td>
		<br/>
		<input type="button" class="w3-btn w3-round w3-large w3-teal" value="Bruk beregnet OG" onclick="setInput(),fabv()">
		</td>
	</tr>
	<tr>
		<td colspan="1"><span class="w3-badge w3-teal">&nbsp;&nbsp;&nbsp;</span> <label class="w3-label w3-text-teal"><b>FG</b></label><input class="w3-input w3-round" type="number" id="fginput" value="1.010" step="0.001"></td><td colspan="1"><output id="abv"></output>%</td>
	</tr>
	<tr>
		<td><span class="w3-badge w3-teal">g/L</span> <label class="w3-label w3-text-teal"><b>Sukker til karbonering</b></label><input class="w3-input w3-round" type="number" id="carboinput" value="6" step="1"></td><td colspan="1"><output id="abvcarbo"></output>%</td>
	</tr>
	<tr class="w3-orange w3-xlarge">
		<td colspan="2"><b>ABV: <output id="abvtot"></output>%</b></td>
	</tr>
		
</table>
</form>

<p><br/><br/></p>


<div class="w3-container w3-teal w3-large"><b>Beregn bitterhet (Tinseth)</b></div>
<form oninput="ibu()">
<table cellpadding="1" class="w3-table">
	<thead>
		<tr class="w3-teal">
			<th>Humlemengde</th>
			<th>Alfasyre</th>
			<th>Koketid</th>
			<th>IBU</th>
		</tr>
	</thead>
	<tr>
		<td><span class="w3-badge w3-teal">g</span><input class="w3-input w3-round" type="number" id="mass1" value="15" step="5"></td>

		<td><span class="w3-badge w3-teal">Alfa %</span><input class="w3-input w3-round" type="number" id="alfa1" value="10.0" step="0.5"></td>

		<td><span class="w3-badge w3-teal">min</span><input class="w3-input w3-round" type="number" id="time1" value="60" step="5"></td>

		<td><output id="ibu1"></output></td>
	</tr>
	<tr>
		<td><span class="w3-badge w3-teal">g</span><input class="w3-input w3-round" type="number" id="mass2" value="0" step="5"></td>

		<td><span class="w3-badge w3-teal">Alfa %</span><input class="w3-input w3-round" type="number" id="alfa2" value="10.0" step="0.5"></td>

		<td><span class="w3-badge w3-teal">min</span><input class="w3-input w3-round" type="number" id="time2" value="30" step="5"></td>

		<td><output id="ibu2"></output></td>
	</tr>
	<tr>
		<td><span class="w3-badge w3-teal">g</span><input class="w3-input w3-round" type="number" id="mass3" value="0" step="5"></td>

		<td><span class="w3-badge w3-teal">Alfa %</span><input class="w3-input w3-round" type="number" id="alfa3" value="10.0" step="0.5"></td>

		<td><span class="w3-badge w3-teal">min</span><input class="w3-input w3-round" type="number" id="time3" value="15" step="5"></td>

		<td><output id="ibu3"></output></td>
	</tr>
	<tr>
		<td><span class="w3-badge w3-teal">g</span><input class="w3-input w3-round" type="number" id="mass4" value="20" step="5"></td>

		<td><span class="w3-badge w3-teal">Alfa %</span><input class="w3-input w3-round" type="number" id="alfa4" value="10.0" step="0.5"></td>

		<td><span class="w3-badge w3-teal">min</span><input class="w3-input w3-round" type="number" id="time4" value="10" step="5"></td>

		<td><output id="ibu4"></output></td>
	</tr>
	<tr>
		<td><span class="w3-badge w3-teal">g</span><input class="w3-input w3-round" type="number" id="mass5" value="0" step="5"></td>

		<td><span class="w3-badge w3-teal">Alfa %</span><input class="w3-input w3-round" type="number" id="alfa5" value="10.0" step="0.5"></td>

		<td><span class="w3-badge w3-teal">min</span><input class="w3-input w3-round" type="number" id="time5" value="5" step="5"></td>

		<td><output id="ibu5"></output></td>
	</tr>
	<tr class="w3-orange w3-xlarge"><td colspan="4"><b>IBU: <output id="ibutot"></output></b></td></tr>
</table>
</form>

<p><br/><br/></p>

<center>
	<button class="w3-btn w3-round w3-large w3-teal" onclick="viewFormattedData()">Sammendrag i TXT&nbsp;&nbsp;<i class="material-icons">open_in_new</i></button>
</center>
<script>
	function viewFormattedData () {
		/* Malt og vann */
		var basis = document.getElementById('basis').value;
		var spes = document.getElementById('spes').value;
		var dme = document.getElementById('dme').value;
		var lme = document.getElementById('lme').value;
		var vol = document.getElementById('vol').value;
		var eff = document.getElementById('eff').value;
		var totm = document.getElementById('m').value;
		var ogber = document.getElementById('g').value;
		var ogmaalt = document.getElementById('oginput').value;
		var fg = document.getElementById("fginput").value;
		var carbo = parseFloat(document.getElementById('carboinput').value);
		var abv = document.getElementById('abvtot').value;

		/* Humle */
		var masses = [document.getElementById('mass1').value, document.getElementById('mass2').value, document.getElementById('mass3').value, document.getElementById('mass4').value, document.getElementById('mass5').value];
		var alfas = [document.getElementById('alfa1').value, document.getElementById('alfa2').value, document.getElementById('alfa3').value, document.getElementById('alfa4').value, document.getElementById('alfa5').value];
		var times = [document.getElementById('time1').value, document.getElementById('time2').value, document.getElementById('time3').value, document.getElementById('time4').value, document.getElementById('time5').value];
		var ibu1 = document.getElementById('ibu1').value;
		var ibu2 = document.getElementById('ibu2').value;
		var ibu3 = document.getElementById('ibu3').value;
		var ibu4 = document.getElementById('ibu4').value;
		var ibu5 = document.getElementById('ibu5').value;
		var ibutot = document.getElementById('ibutot').value;


		var textOut = "<pre>"
		textOut += "<br/>Ingredienser:<br/>--------------------------<br/>";
		if (basis != 0.0) {
			textOut += ""+basis+"kg basismalt<br/>";
		}
		if (spes != 0.0) {
			textOut += ""+spes+"kg spesialmalt<br/>";
		}
		if (lme != 0.0) {
			textOut += ""+dme+"kg sirup/maltekstrakt<br/>";
		}
		if (dme != 0.0) {
			textOut += ""+spes+"kg sukker/spraymalt<br/>";
		}
		textOut += "Totalt: "+totm+"kg<br/>";
		textOut += "<br/><br/>Humleskjema:<br/>--------------------------<br/>";
		if (masses[0] != 0.0) {
			textOut += ""+times[0]+" min: "+masses[0]+"g Humle ("+alfas[0]+"%)<br/>";
		}
		if (masses[1] != 0.0) {
			textOut += ""+times[1]+" min: "+masses[1]+"g Humle ("+alfas[1]+"%)<br/>";
		}
		if (masses[2] != 0.0) {
			textOut += ""+times[2]+" min: "+masses[2]+"g Humle ("+alfas[2]+"%)<br/>";
		}
		if (masses[3] != 0.0) {
			textOut += ""+times[3]+" min: "+masses[3]+"g Humle ("+alfas[3]+"%)<br/>";
		}
		if (masses[4] != 0.0) {
			textOut += ""+times[4]+" min: "+masses[4]+"g Humle ("+alfas[4]+"%)<br/>";
		}
		textOut += "<br/>Bitterhet: ca. "+ibutot+" IBU<br/><br/><br/>";
		textOut += "Vitale mål:<br/>--------------------------<br/>";
		textOut += "Vørtervolum: "+vol+" liter<br/>";
		textOut += "Effektivitet: "+eff+"% av teoretisk mulig meskeutbytte<br/>";
		/*textOut += "OG beregnet: "+ogber+"<br/>";*/
		textOut += "OG målt: "+ogmaalt+"<br/>";
		textOut += "FG målt: "+fg+"<br/>";
		textOut += "Karbonering med sukker: "+carbo+"g/L<br/><br/>";
		textOut += "ABV inkl. karbonering: "+abv+"%<br/><br/>";
		textOut += "</pre>";
		var newWindow = window.open();
		newWindow.document.write(textOut);
	};
</script>

<p><br/><br/></p>


<table cellpadding="1" class="w3-table">
	<thead>
		<tr class="w3-teal">
			<th>Diverse konverteringer</th>
		</tr>
	</thead>
	<tr><td>
		<div class="w3-label w3-text-teal"><b>Temperatur (Farenheit-Celcius):</b></div>
		<center>
		<form oninput="temp()">
			<output id="ftemp"></output>&#8457;<br/>
			<input type="range" id="myRangeT" value="18.0" min="0" max="100" step="0.1"><br/>
			<output id="ctemp" ></output>&#8451;
		</form>
		</center>
	</td></tr>
	<tr><td>
		<div class="w3-label w3-text-teal"><b>Vekt (Ounces-Gram):</b></div>
		<center>
		<form oninput="gOz()">
			<output id="oz"></output> oz<br/>
			<input type="range" id="myRangeW" value="1.0" min="0" max="10" step="0.01"><br/>
			<output id="gram"></output> g
		</form>
		</center>
	</td></tr>
</table>	

<p><br/><br/></p>



<footer class="w3-container w3-teal">
	<div class="w3-small">
		Sist oppdatert: <span id="lastMod"></span><br/>
		&copy;&nbsp;Dælenenga nanobryggeri
	</div>
</footer>

<script>
	var lm = new  Date(document.lastModified);
	document.getElementById("lastMod").innerHTML = ""+lm.getDate()+"/"+(lm.getMonth()+1)+"-"+lm.getFullYear()+"";
</script>

<!--
+", kl. "+lm.getHours()+":"+lm.getMinutes()+":"+lm.getSeconds()
-->

</body>
</html>







