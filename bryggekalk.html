<!DOCTYPE html> <!-- HTML5 -->
<html>
<meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="./w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lobster">
<head>
	<title>Dælenenga bryggekalkulator</title>
	<link rel="apple-touch-icon" sizes="114x114" href="gravity/images/icon.png"/>
	<style>
		.w3-lobster {
		  font-family: "Lobster", serif;
		  font-weight: bold;
		}
		/*Slider formatting*/
		input[type=range] {
			width: 90%; /* Specific width is required for Firefox. */
		}
		input[type=number] {
			width: 85%; /* Specific width is required for Firefox. */
			border: 2px solid teal;
    		border-radius: 4px;
		}
	</style>
	
	<script> 
	function x() {
		document.getElementById('g').value = ((1000 +
			(
				375*parseFloat(document.getElementById('dme').value) +
				270*parseFloat(document.getElementById('lme').value)
			) /
			parseFloat(document.getElementById('vol').value)
			+
			parseFloat(document.getElementById('eff').value) * 
			(
				296*parseFloat(document.getElementById('basis').value) + 
				270*parseFloat(document.getElementById('spes').value)
			) /
			(
				100*parseFloat(document.getElementById('vol').value)
			)
		)/1000).toFixed(3);
	};
	
	function f() {
		
		//var m = $('#m').val();
		
		document.getElementById('m').value = (
			parseFloat(document.getElementById('basis').value) +
			parseFloat(document.getElementById('spes').value) +
			parseFloat(document.getElementById('lme').value) +
			parseFloat(document.getElementById('dme').value) 
		).toFixed(2);
	};
	
	function p() {
		document.getElementById('pbasis').value = ((100*parseFloat(document.getElementById('basis').value)) / document.getElementById('m').value).toFixed(0);
		document.getElementById('pspes').value = ((100*parseFloat(document.getElementById('spes').value)) / document.getElementById('m').value).toFixed(0);
		document.getElementById('plme').value = ((100*parseFloat(document.getElementById('lme').value)) / document.getElementById('m').value).toFixed(0);
		document.getElementById('pdme').value = ((100*parseFloat(document.getElementById('dme').value)) / document.getElementById('m').value).toFixed(0);
	};

	function imp() {
		document.getElementById('lbbasis').value = (parseFloat(document.getElementById('basis').value) * 2.2046).toFixed(1);
		document.getElementById('lbspes').value = (parseFloat(document.getElementById('spes').value) * 2.2046).toFixed(1);
		document.getElementById('lblme').value = (parseFloat(document.getElementById('lme').value) * 2.2046).toFixed(1);
		document.getElementById('lbdme').value = (parseFloat(document.getElementById('dme').value) * 2.2046).toFixed(1);
		document.getElementById('lbtot').value = (parseFloat(document.getElementById('m').value) * 2.2046).toFixed(1);
		document.getElementById('galvol').value = (parseFloat(document.getElementById('vol').value) / 3.7854).toFixed(1);
	};
	
	function fabv() {
		var fg = document.getElementById("fginput").value;
		var og = document.getElementById('g').value;
		var carbo = parseFloat(document.getElementById('carboinput').value);
		/* Simple formula: */
		/* document.getElementById('abv').value = ((og-fg)*131.25).toFixed(1); */
		/* Advanced formula, more accurate for higher abv: */
		document.getElementById('abv').value = ((76.08 * (og-fg) / (1.775-og)) * (fg / 0.794)).toFixed(2);
		var abvx = parseFloat(document.getElementById('abv').value);
		document.getElementById('abvcarbo').value = (carbo/17.0).toFixed(2);
		document.getElementById('abvtot').value = (abvx + (carbo / 17.0)).toFixed(2);
	};	

	function ibu() {
		var og = document.getElementById('g').value;
		var v = document.getElementById('vol').value;
		var masses = [document.getElementById('mass1').value, document.getElementById('mass2').value, document.getElementById('mass3').value, document.getElementById('mass4').value, document.getElementById('mass5').value];
		var alfas = [document.getElementById('alfa1').value/100, document.getElementById('alfa2').value/100, document.getElementById('alfa3').value/100, document.getElementById('alfa4').value/100, document.getElementById('alfa5').value/100];
		var times = [document.getElementById('time1').value, document.getElementById('time2').value, document.getElementById('time3').value, document.getElementById('time4').value, document.getElementById('time5').value];
		var ibu1, ibu2, ibu3, ibu4, ibu5;
		var ibus = [ibu1, ibu2, ibu3, ibu4, ibu5];

		for (i=0; i<5; i++) {
			ibus[i] = (alfas[i]*masses[i]*1000/v) 
					* (1.65*Math.pow(0.000125,(og-1))) 
					* (1-Math.exp(-0.04*times[i]))/4.15;
		}

		document.getElementById('ibu1').value = (ibus[0]).toFixed(1);
		document.getElementById('ibu2').value = (ibus[1]).toFixed(1);
		document.getElementById('ibu3').value = (ibus[2]).toFixed(1);
		document.getElementById('ibu4').value = (ibus[3]).toFixed(1);
		document.getElementById('ibu5').value = (ibus[4]).toFixed(1);
	
		document.getElementById('ibutot').value = (ibus[0]+ibus[1]+ibus[2]+ibus[3]+ibus[4]).toFixed(0);


	};

	function temp() {
		var cx = document.getElementById("myRange").value;
		document.getElementById("ctemp").innerHTML = (cx*1 + 0).toFixed(1);
		var fx = (cx*1.8 + 32.0).toFixed(1);
		document.getElementById("ftemp").innerHTML = fx;
	};
	</script>
</head>

<body onload="f(),x(),p(),imp(),fabv(),ibu(),temp()" class="w3-light-grey">



<!-- <img src="gravity/images/icon.png" align="left"> -->
<div class="w3-container w3-lobster w3-teal w3-xxlarge">
	<img src="./dn-logo-white.svg" width="70" height="70" align="center" style="margin: 2px 0px" />
	Dælenenga bryggekalkulator
</div>

<form oninput="f(),x(),p(),imp(),fabv()">
<table id="calctable" cellpadding="1" class="w3-table">
	<thead>
		<tr class="w3-orange">
			<th>Malt/div.</th>
			<th>US-mål</th>
			<th>Andel</th>
		</tr>
	</thead>		
	<tr><td><span class="w3-badge w3-teal">kg</span> <label class="w3-label w3-text-teal"><b>Basismalt</b></label><input class="w3-input w3-round" type="number" id="basis" value="5" step="0.5"></td><td>&nbsp;<output id="lbbasis"></output>lb&nbsp;</td><td><output id="pbasis"></output>%</td></tr>
	
	<tr><td><span class="w3-badge w3-teal">kg</span> <label class="w3-label w3-text-teal"><b>Spesialmalt</b></label><input class="w3-input w3-round" type="number" id="spes" value="0.0" step="0.1"></td><td>&nbsp;<output id="lbspes"></output>lb&nbsp;</td><td><output id="pspes"></output>%</td></tr>
	
	<tr><td><span class="w3-badge w3-teal">kg</span> <label class="w3-label w3-text-teal"><b>Sirup/LME</b></label><input class="w3-input w3-round" type="number" id="lme" value="0.0" step="0.5"><td>&nbsp;<output id="lblme"></output>lb&nbsp;</td><td><output id="plme"></output>%</td></tr>
	
	<tr><td><span class="w3-badge w3-teal">kg</span> <label class="w3-label w3-text-teal"><b>Sukker/DME</b></label><input class="w3-input w3-round" type="number" id="dme" value="0.0" step="0.5"></td><td>&nbsp;<output id="lbdme"></output>lb&nbsp;</td><td>
	<output id="pdme"></output>%</td></tr>
	
	<tr><td><span class="w3-badge w3-teal">L</span> <label class="w3-label w3-text-teal"><b>Volum</b></label><input class="w3-input w3-round" type="number" id="vol" value="23"></td><td><output id="galvol"></output>gal&nbsp;</td><td></td></tr>
	
	<tr><td><span class="w3-badge w3-teal">%</span> <label class="w3-label w3-text-teal"><b>Utbytte</b></label><input class="w3-input w3-round" type="number" id="eff" value="75"></td><td></td><td></tr>
	
	<tr><td>Totalt: <output id="m"></output>kg</td><td><output id="lbtot"></output>lb&nbsp;</td></td><td></tr>
	
	<tr class="w3-orange w3-xlarge"><td><b>OG: <output id="g"></output></b></td></td><td><td></td></tr>

	<tr><td colspan="3">&nbsp;</td></tr>

	<tr><td colspan="1"><span class="w3-badge w3-teal">&nbsp;&nbsp;&nbsp;</span> <label class="w3-label w3-text-teal"><b>FG</b></label><input class="w3-input w3-round" type="number" id="fginput" value="1.010" step="0.001">
	</td><td colspan="2">netto ABV: <output id="abv"></output>%</td></tr>

	<tr><td><span class="w3-badge w3-teal">g/L</span> <label class="w3-label w3-text-teal"><b>Sukker til karbonering</b></label><input class="w3-input w3-round" type="number" id="carboinput" value="6" step="1"></td><td colspan="2">netto ABV: <output id="abvcarbo"></output>%</td></tr>

	<tr class="w3-orange w3-xlarge"><td><b>ABV: <output id="abvtot"></output>%</b></td></td><td><td></td></tr>
		
</table>
</form>

<p><br/><br/></p>


<div class="w3-container w3-teal w3-xlarge"><b>Bitterhet (Tinseth)</b></div>
<form oninput="ibu()">
<table cellpadding="1" class="w3-table">
<thead>
	<tr class="w3-orange">
		<th>Vekt</th>
		<th>Alfasyre</th>
		<th>Koketid</th>
		<th>IBU</th>
	</tr>
</thead>
<tr>
	<td><span class="w3-badge w3-teal">g</span><input class="w3-input w3-round" type="number" id="mass1" value="15" step="5"></td>

	<td><span class="w3-badge w3-teal">Alfa %</span><input class="w3-input w3-round" type="number" id="alfa1" value="10.0" step="0.5"></td>

	<td><span class="w3-badge w3-teal">min</span><input class="w3-input w3-round" type="number" id="time1" value="60" step="5"></td>

	<td><output id="ibu1"></output></td>
</tr>
<tr>
	<td><span class="w3-badge w3-teal">g</span><input class="w3-input w3-round" type="number" id="mass2" value="0" step="5"></td>

	<td><span class="w3-badge w3-teal">Alfa %</span><input class="w3-input w3-round" type="number" id="alfa2" value="10.0" step="0.5"></td>

	<td><span class="w3-badge w3-teal">min</span><input class="w3-input w3-round" type="number" id="time2" value="30" step="5"></td>

	<td><output id="ibu2"></output></td>
</tr>
<tr>
	<td><span class="w3-badge w3-teal">g</span><input class="w3-input w3-round" type="number" id="mass3" value="0" step="5"></td>

	<td><span class="w3-badge w3-teal">Alfa %</span><input class="w3-input w3-round" type="number" id="alfa3" value="10.0" step="0.5"></td>

	<td><span class="w3-badge w3-teal">min</span><input class="w3-input w3-round" type="number" id="time3" value="15" step="5"></td>

	<td><output id="ibu3"></output></td>
</tr>
<tr>
	<td><span class="w3-badge w3-teal">g</span><input class="w3-input w3-round" type="number" id="mass4" value="20" step="5"></td>

	<td><span class="w3-badge w3-teal">Alfa %</span><input class="w3-input w3-round" type="number" id="alfa4" value="10.0" step="0.5"></td>

	<td><span class="w3-badge w3-teal">min</span><input class="w3-input w3-round" type="number" id="time4" value="10" step="5"></td>

	<td><output id="ibu4"></output></td>
</tr>
<tr>
	<td><span class="w3-badge w3-teal">g</span><input class="w3-input w3-round" type="number" id="mass5" value="0" step="5"></td>

	<td><span class="w3-badge w3-teal">Alfa %</span><input class="w3-input w3-round" type="number" id="alfa5" value="10.0" step="0.5"></td>

	<td><span class="w3-badge w3-teal">min</span><input class="w3-input w3-round" type="number" id="time5" value="5" step="5"></td>

	<td><output id="ibu5"></output></td>
</tr>
<tr class="w3-orange w3-xlarge"><td colspan="4"><b>IBU: <output id="ibutot"></output></b></td></tr>
</table>
</form>


<p><br/><br/></p>

<table cellpadding="1" class="w3-table">
<tr><td>
	<div class="w3-label w3-text-teal"><b>Konvertering av temperatur:</b></div>
	<center>
	<form oninput="temp()">
		<output id="ctemp"></output>&#8451;<br/>
		<input type="range" id="myRange" value="18" min="0" max="100" step="0.1"><br/>
		<output id="ftemp" ></output>&#8457;
	</form>
	</center>
</td></tr>
</table>	









</body>
</html>







